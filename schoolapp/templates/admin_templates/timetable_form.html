{% extends 'admin_templates/base.html' %}
{% load static %}
{% block title %} Add/Edit Timetable {% endblock %}

{% block dashboard_title %}Timetable Form{% endblock %}
{% block dashboard_title1 %}Manage Timetable{% endblock %}

{% block main_content %}
<section class="content">
  <div class="container-fluid">
    <form method="post">
      {% csrf_token %}
      <div class="card card-primary">
        <div class="card-header">
          <h3 class="card-title">Add/Edit Timetable Entry</h3>
        </div>

        <div class="card-body">
          <div class="form-group">
            <label>Subject</label>
            <select name="subject_id" class="form-control" required>
              {% for subject in subjects %}
                <option value="{{ subject.id }}">{{ subject.subject_name }} ({{ subject.class_id.class_name }})</option>
              {% endfor %}
            </select>
          </div>

          <div class="form-group">
            <label>Class</label>
            <select name="class_id" class="form-control" required>
              {% for c in classes %}
                <option value="{{ c.id }}">{{ c.class_name }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="form-group">
            <label>Department</label>
            <select name="department_id" class="form-control" required>
              {% for dept in departments %}
                <option value="{{ dept.id }}">{{ dept.department_name }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="form-group">
            <label>Session Year</label>
            <select name="session_year_id" class="form-control" required>
              {% for session in sessions %}
                <option value="{{ session.id }}">{{ session.session_start_year }} TO {{ session.session_end_year }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="form-group">
            <label>Day of the Week</label>
            <select name="day_of_week" class="form-control" required>
              {% for d in days %}
                <option value="{{ d.0 }}">{{ d.1 }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="form-group">
            <label>Start Time</label>
            <input type="time" name="start_time" class="form-control" required>
          </div>

          <div class="form-group">
            <label>End Time</label>
            <input type="time" name="end_time" class="form-control" required>
          </div>

          <div class="form-group">
            <label>Classroom Name</label>
            <input type="text" name="classroom" class="form-control" placeholder="Enter classroom name" required>
          </div>

          <div class="form-group">
            <label>Assigned Teacher (Optional)</label>
            <select name="staff_id" class="form-control">
              <option value="">-- Select Staff --</option>
              {% for staff in staffs %}
                <option value="{{ staff.id }}">{{ staff.admin.first_name }} {{ staff.admin.last_name }}</option>
              {% endfor %}
            </select>
          </div>
        </div>
        {% include 'admin_templates/verification_message.html' with user=user %}

        <div class="card-footer">
          <button type="submit" class="btn btn-primary btn-block">Save Timetable Entry</button>
        </div>
      </div>
    </form>
  </div>
</section>
{% endblock %}
